"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[132],{3030:(P,O,l)=>{l.d(O,{H:()=>y});var b=l(177),t=l(4438),e=l(9417);function o(i,h){if(1&i&&t.nrm(0,"input",4),2&i){const a=t.XpG();t.HbH(a.optional_class),t.FS9("ngClass",a.control.invalid&&a.control.touched?"error":""),t.Y8G("type",a.type)("formControl",a.control),t.BMQ("placeholder",a.label)}}function m(i,h){if(1&i&&t.nrm(0,"input",5),2&i){const a=t.XpG();t.HbH(a.optional_class),t.FS9("ngClass",a.control.invalid&&a.control.touched?"error":""),t.Y8G("type",a.passwordFieldType)("formControl",a.control),t.BMQ("placeholder",a.label)}}function p(i,h){1&i&&t.nrm(0,"img",9)}function _(i,h){1&i&&t.nrm(0,"img",10)}function C(i,h){if(1&i){const a=t.RV6();t.j41(0,"button",6),t.bIt("click",function(){t.eBV(a);const d=t.XpG();return t.Njj(d.togglePasswordVisibility())}),t.DNE(1,p,1,0,"img",7)(2,_,1,0,"img",8),t.k0s()}if(2&i){const a=t.XpG();t.R7$(),t.Y8G("ngIf","password"===a.passwordFieldType),t.R7$(),t.Y8G("ngIf","text"===a.passwordFieldType)}}let y=(()=>{var i;class h{constructor(){var s,d;this.label="",this.type="text",this.optional_class="",this.valueChange=new t.bkB,this.erroresEmitter=new t.bkB,this.Emitter=new t.bkB,this.passwordFieldType="password",this.control=new e.MJ("",null!==(s=this.type)&&void 0!==s&&s.includes("email")?[e.k0.required,e.k0.email]:null!==(d=this.type)&&void 0!==d&&d.includes("password")?[e.k0.required,e.k0.minLength(6)]:[e.k0.required]),this.onTouched=()=>{}}ngOnInit(){}writeValue(s){this.control.setValue(s)}registerOnChange(s){this.control.valueChanges.subscribe(s)}registerOnTouched(s){this.onTouched=s}setDisabledState(s){s?this.control.disable():this.control.enable()}get value(){return this.control.value}set value(s){this.control.setValue(s),this.valueChange.emit(s)}validate(s){const d={};return this.erroresEmitter.emit(Object.values(d)),d}togglePasswordVisibility(){this.passwordFieldType="password"===this.passwordFieldType?"text":"password"}}return(i=h).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=t.VBU({type:i,selectors:[["app-custom-input"]],inputs:{label:"label",type:"type",optional_class:"optional_class"},outputs:{valueChange:"valueChange",erroresEmitter:"erroresEmitter",Emitter:"Emitter"},standalone:!0,features:[t.Jv_([{provide:e.kq,useExisting:(0,t.Rfq)(()=>i),multi:!0},{provide:e.cz,useExisting:(0,t.Rfq)(()=>i),multi:!0}]),t.aNF],decls:4,vars:3,consts:[[1,"relative"],["class","shadow border py-2 px-3 leading-tight inputLay ",3,"type","class","ngClass","formControl",4,"ngIf"],["class","shadow py-2 px-3 leading-tight inputLay","placeholder","******************",3,"class","type","formControl","ngClass",4,"ngIf"],["type","button","class","absolute inset-y-0 right-0 px-3 flex items-center",3,"click",4,"ngIf"],[1,"shadow","border","py-2","px-3","leading-tight","inputLay",3,"type","ngClass","formControl"],["placeholder","******************",1,"shadow","py-2","px-3","leading-tight","inputLay",3,"type","formControl","ngClass"],["type","button",1,"absolute","inset-y-0","right-0","px-3","flex","items-center",3,"click"],["src"," /assets/icon/eye-closed.svg","alt","eye","class","h-6 w-6",4,"ngIf"],["src","/assets/icon/eye-open.svg","alt","Hide Password","class","h-6 w-6",4,"ngIf"],["src"," /assets/icon/eye-closed.svg","alt","eye",1,"h-6","w-6"],["src","/assets/icon/eye-open.svg","alt","Hide Password",1,"h-6","w-6"]],template:function(s,d){1&s&&(t.j41(0,"div",0),t.DNE(1,o,1,6,"input",1)(2,m,1,6,"input",2)(3,C,3,2,"button",3),t.k0s()),2&s&&(t.R7$(),t.Y8G("ngIf","password"!==d.type),t.R7$(),t.Y8G("ngIf","password"===d.type),t.R7$(),t.Y8G("ngIf","password"===d.type))},dependencies:[e.X1,e.me,e.BC,e.l_,b.MD,b.YU,b.bT],styles:[".inputLay[_ngcontent-%COMP%]{width:100%;border-radius:2rem;color:var(--dark-gray);padding-right:2.5rem;transition:border-color .3s;box-shadow:none}.inputLay[_ngcontent-%COMP%]:focus{border:solid .1rem var(--dark-blue)!important}.error[_ngcontent-%COMP%]{border-color:red}.notes_input[_ngcontent-%COMP%]{border-radius:.75rem;height:2.87rem}input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;color:#999;opacity:.6;cursor:not-allowed}"]}),h})()},9132:(P,O,l)=>{l.d(O,{l:()=>w});var b=l(467),t=l(177),e=l(4438),o=l(9417),m=l(6114),p=l(6938),_=l(519),C=l(3030),y=l(6068),i=l(4346),h=l(7927),a=l(2185),s=l(1419);const d=()=>({width:"25rem",height:"15.625rem"});function I(c,v){1&c&&(e.j41(0,"p"),e.EFF(1,"* El campo es requerido"),e.k0s())}function E(c,v){1&c&&(e.j41(0,"p"),e.EFF(1,"* El correo electr\xf3nico es incorrecto"),e.k0s())}function k(c,v){1&c&&(e.j41(0,"p"),e.EFF(1,"* El n\xfamero de c\xe9dula es incorrecto"),e.k0s())}function x(c,v){1&c&&(e.j41(0,"p"),e.EFF(1,"* La fecha de nacimiento es incorrecta (DD/MM/AAAA)"),e.k0s())}function F(c,v){if(1&c){const M=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(M);const r=e.XpG();return e.Njj(r.onEditModeChanged())})("click",function(){e.eBV(M);const r=e.XpG();return e.Njj(r.onCancel())}),e.j41(1,"span",23),e.EFF(2,"Cancelar"),e.k0s()(),e.j41(3,"button",24)(4,"span",25),e.EFF(5,"Guardar"),e.k0s()()}if(2&c){const M=e.XpG();e.R7$(3),e.Y8G("disabled",M.userInfoForm.invalid)}}let w=(()=>{var c;class v{constructor(n,r,g,u){var f;this._fb=n,this._userService=r,this.route=g,this.mapService=u,this.isEditable=!1,this.userRole="",this.userInfo=new e.bkB,this.editModeChanged=new e.bkB,this.cancelClicked=new e.bkB,this.id="",this.isSubmitted=!1,this.user={},this.userLocation=null,this.id=this.route.snapshot.params.id?this.route.snapshot.params.id:null===(f=(0,m.xI)().currentUser)||void 0===f?void 0:f.uid,this.userInfoForm=this._fb.group({identification:["",[o.k0.required,o.k0.minLength(9),o.k0.maxLength(9)]],name:["",o.k0.required],lastname:["",o.k0.required],birthdate:["",[o.k0.required,o.k0.pattern("^[0-9]{2}/[0-9]{2}/[0-9]{4}$")]],email:["",[o.k0.required,o.k0.email]],phoneNumber:["",o.k0.required]},{disabled:!this.isEditable})}ngOnInit(){var n=this;return(0,b.A)(function*(){n.id&&n._userService.getUserById(n.id).then(r=>{n.user=r.data,n.userInfoForm.patchValue({identification:n.user.identification,name:n.user.name,lastname:n.user.lastname,birthdate:n.user.birthdate,email:n.user.email,phoneNumber:n.user.phoneNumber}),n.user.lat&&n.user.lng&&(n.userLocation={lat:n.user.lat,lng:n.user.lng},n.mapService.updateUserLocation(n.userLocation))}).catch(r=>{console.error("Error fetching user data:",r)})})()}ngOnDestroy(){this.userLocation=null,this.mapService.updateUserLocation(null),this.mapService.updateFormattedAddress("")}ngOnChanges(n){n.isEditable&&this.updateFormControls()}onEditModeChanged(){this.editModeChanged.emit(!this.isEditable)}onAddressChange(n){this.user.address=n}onLocationChange(n){this.user.lat=null==n?void 0:n.lat,this.user.lng=null==n?void 0:n.lng}updateFormControls(){var n;const r=(null===(n=(0,m.xI)().currentUser)||void 0===n?void 0:n.uid)===this.id;for(const g in this.userInfoForm.controls){const u=this.userInfoForm.get(g);r||"phoneNumber"===g?null==u||u[this.isEditable?"enable":"disable"]():null==u||u.disable()}}isFieldInvalid(n){return(0,i.G)(this.userInfoForm,n)}isFormatInvalid(n){return(0,i.N)(this.userInfoForm,n)}onSubmit(){this.isSubmitted=!0;const{identification:n,name:r,lastname:g,birthdate:u,email:f,phoneNumber:T,address:D,lat:U,lng:R}=this.userInfoForm.value;this.userInfo.emit({identification:n||this.user.identification,name:r||this.user.name,lastname:g||this.user.lastname,birthdate:u||this.user.birthdate,email:f||this.user.email,phoneNumber:T||this.user.phoneNumber,address:this.user.address||D,lat:this.user.lat||U,lng:this.user.lng||R,role:this.userRole||this.user.role})}onCancel(){this.cancelClicked.emit()}}return(c=v).\u0275fac=function(n){return new(n||c)(e.rXU(o.ok),e.rXU(h.D),e.rXU(a.nX),e.rXU(s.s))},c.\u0275cmp=e.VBU({type:c,selectors:[["app-user-info-form"]],inputs:{isEditable:"isEditable",userRole:"userRole"},outputs:{userInfo:"userInfo",editModeChanged:"editModeChanged",cancelClicked:"cancelClicked"},standalone:!0,features:[e.OA$,e.aNF],decls:35,vars:20,consts:[["pnl",""],[1,"form-container"],[1,"user-data-form",3,"submit","formGroup"],[1,"form-inputs"],[1,"flex-row"],[1,"mb-2","input-container"],["id","name","name","name","formControlName","name",3,"label"],["id","lastname","name","lastname","formControlName","lastname",3,"label"],["id","identification","name","identification","formControlName","identification",3,"label"],["id","birthdate","name","birthdate","formControlName","birthdate",3,"label"],["id","phoneNumber","name","phoneNumber","formControlName","phoneNumber",3,"label","type"],["id","email","name","email","formControlName","email",3,"label","type"],[1,"errorContainer","error"],[4,"ngIf"],[1,"form-map"],[1,"card-title","form-title","text-gray"],[1,"map-container"],["styleClass","panel-overlay",3,"target","blocked"],["styleClass","map-panel",3,"showHeader"],[1,"map"],[3,"formattedAddressChange","userLocationChange","isEditable","mapStyles"],[1,"actions"],["type","button",1,"cancel-btn",3,"click"],[1,"cancel-text"],["type","submit",1,"save-btn",3,"disabled"],[1,"save-text"]],template:function(n,r){if(1&n){const g=e.RV6();e.j41(0,"div",1)(1,"form",2),e.bIt("submit",function(){return e.eBV(g),e.Njj(r.onSubmit())}),e.j41(2,"div",3)(3,"div",4)(4,"div",5),e.nrm(5,"app-custom-input",6),e.k0s(),e.j41(6,"div",5),e.nrm(7,"app-custom-input",7),e.k0s()(),e.j41(8,"div",4)(9,"div",5),e.nrm(10,"app-custom-input",8),e.k0s(),e.j41(11,"div",5),e.nrm(12,"app-custom-input",9),e.k0s()(),e.j41(13,"div",4)(14,"div",5),e.nrm(15,"app-custom-input",10),e.k0s(),e.j41(16,"div",5),e.nrm(17,"app-custom-input",11),e.k0s()(),e.j41(18,"div",12),e.DNE(19,I,2,0,"p",13)(20,E,2,0,"p",13)(21,k,2,0,"p",13)(22,x,2,0,"p",13),e.k0s()(),e.j41(23,"div",14)(24,"h3",15),e.EFF(25," Selecciona tu ubicaci\xf3n exacta "),e.k0s(),e.j41(26,"div",16)(27,"div"),e.nrm(28,"p-blockUI",17),e.j41(29,"p-panel",18,0)(31,"div",19)(32,"app-map",20),e.bIt("formattedAddressChange",function(f){return e.eBV(g),e.Njj(r.onAddressChange(f))})("userLocationChange",function(f){return e.eBV(g),e.Njj(r.onLocationChange(f))}),e.k0s()()()()()(),e.j41(33,"div",21),e.DNE(34,F,6,1),e.k0s()()()}if(2&n){const g=e.sdS(30);e.R7$(),e.Y8G("formGroup",r.userInfoForm),e.R7$(4),e.Y8G("label","Nombre"),e.R7$(2),e.Y8G("label","Apellido"),e.R7$(3),e.Y8G("label","C\xe9dula"),e.R7$(2),e.Y8G("label","Fecha de nacimiento (DD/MM/AAAA)"),e.R7$(3),e.Y8G("label","Tel\xe9fono")("type","tel"),e.R7$(2),e.Y8G("label","Correo Electr\xf3nico")("type","email"),e.R7$(2),e.Y8G("ngIf",r.isFieldInvalid("name")||r.isFieldInvalid("lastname")||r.isFieldInvalid("identification")||r.isFieldInvalid("birthdate")||r.isFieldInvalid("phoneNumber")||r.isFieldInvalid("email")),e.R7$(),e.Y8G("ngIf",r.isFormatInvalid("email")),e.R7$(),e.Y8G("ngIf",r.isFormatInvalid("identification")),e.R7$(),e.Y8G("ngIf",r.isFormatInvalid("birthdate")),e.R7$(6),e.Y8G("target",g)("blocked",!r.isEditable),e.R7$(),e.Y8G("showHeader",!1),e.R7$(3),e.Y8G("isEditable",r.isEditable)("mapStyles",e.lJ4(19,d)),e.R7$(2),e.vxM(34,r.isEditable?34:-1)}},dependencies:[o.X1,o.qT,o.BC,o.cb,o.j4,o.JD,t.MD,t.bT,C.H,y.i,p.S,p.K,_.b,_.Z],styles:['form[_ngcontent-%COMP%]{width:80%}form.form[_ngcontent-%COMP%], .google-block[_ngcontent-%COMP%]{width:75%;padding-top:2.5rem}.form-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:justify-center;flex-direction:column;align-items:center}.inputLay[_ngcontent-%COMP%]{width:100%;border-radius:2rem;color:var(--dark-gray);padding-right:2.5rem;transition:border-color .3s}.inputLay[_ngcontent-%COMP%]:focus{border:solid .1rem var(--dark-blue)!important}.buttonLay[_ngcontent-%COMP%]{width:100%;border-radius:2rem;font-weight:700;color:var(--white);background-color:var(--dark-blue)}.buttonLay.register[_ngcontent-%COMP%]{background-color:var(--white);color:var(--dark-blue)}.buttonLay.disabled[_ngcontent-%COMP%]{opacity:.5}.text-gray[_ngcontent-%COMP%]{color:var(--dark-gray)}.custom-label[_ngcontent-%COMP%]{position:relative;padding:0 10px}.custom-label[_ngcontent-%COMP%]:before, .custom-label[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;width:calc(50% - 5rem);height:1px;background-color:var(--white)}.custom-label.registration[_ngcontent-%COMP%]:before, .custom-label.registration[_ngcontent-%COMP%]:after{background-color:var(--white)}.custom-label.login[_ngcontent-%COMP%]:before, .custom-label.login[_ngcontent-%COMP%]:after{background-color:var(--dark-blue)}.custom-label[_ngcontent-%COMP%]:before{left:0}.custom-label[_ngcontent-%COMP%]:after{right:0}.google-button[_ngcontent-%COMP%]{display:flex;width:100%;height:2.5rem;align-items:center;justify-content:center;border:1px solid #ccc;border-radius:1.875rem;background-color:#fff;cursor:pointer;margin-top:1rem}.google-icon[_ngcontent-%COMP%]{width:24px;height:auto;margin-right:1rem}.button-text[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#3c4043}.errorContainer[_ngcontent-%COMP%]{color:#d8000c;margin-bottom:1rem}.errorContainer.register.error[_ngcontent-%COMP%]{color:#fff}@media screen and (max-width: 1150px){form.form[_ngcontent-%COMP%]{padding:0rem;margin-bottom:1rem}.account-label[_ngcontent-%COMP%]{display:none}.buttonLay.register[_ngcontent-%COMP%]{background-color:var(--dark-blue);color:var(--white)}.custom-label[_ngcontent-%COMP%]{color:var(--dark-gray)}.custom-label[_ngcontent-%COMP%]:before, .custom-label[_ngcontent-%COMP%]:after{background-color:var(--dark-gray)}.errorContainer[_ngcontent-%COMP%]{color:#d8000c}}',".user-data-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;gap:1rem}.form-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}.input-container[_ngcontent-%COMP%]{flex:1 1 0;min-width:350px}.form-title[_ngcontent-%COMP%]{margin:unset;font-size:1rem}.text-gray[_ngcontent-%COMP%]{color:var(--dark-gray)}.form-map[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.map-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-end}[_nghost-%COMP%]     .map-panel.p-panel .p-panel-content{padding:0}[_nghost-%COMP%]     .panel-overlay.p-blockui{border-radius:1rem;width:25rem!important;height:15.625rem}.actions[_ngcontent-%COMP%]{display:flex;align-self:flex-end;gap:1rem}.save-btn[_ngcontent-%COMP%]{width:auto;padding:8px 16px;border-radius:2rem;font-weight:700;background-color:var(--dark-blue);color:#fff;transition:all .15s ease 0s}.cancel-btn[_ngcontent-%COMP%]{width:auto;padding:8px 16px;border-radius:2rem;font-weight:700;background-color:var(--white);color:#f87171;border:1px solid #F87171;transition:all .15s ease 0s}@media screen and (max-width: 1150px){.flex-row[_ngcontent-%COMP%]{flex-direction:column}.actions[_ngcontent-%COMP%]{position:fixed;bottom:4.688rem;flex-direction:column-reverse}.actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{width:unset;margin-left:unset;background-color:#fff;padding:1.5rem;box-shadow:0 4px 12px #0d0a2c0f;border:solid .063rem #e6e6e9;border-radius:1.5rem;background-image:url(/assets/icon/floppy_disk_icon.svg);background-repeat:no-repeat;background-position:center;background-size:20px 20px}.actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{width:unset;margin-left:unset;background-color:#fff;padding:1.5rem;box-shadow:0 4px 12px #0d0a2c0f;border:solid .063rem #e6e6e9;border-radius:1.5rem;background-image:url(/assets/icon/cancel_icon.svg);background-repeat:no-repeat;background-position:center;background-size:20px 20px}.actions[_ngcontent-%COMP%]   .save-text[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]   .cancel-text[_ngcontent-%COMP%]{display:none}}"]}),v})()},4346:(P,O,l)=>{function b(e,o){var m,p,_;return(null===(m=e.get(o))||void 0===m?void 0:m.invalid)&&!1===(null===(p=e.get(o))||void 0===p?void 0:p.pristine)&&(null===(_=e.get(o))||void 0===_?void 0:_.errors.required)}function t(e,o){var m,p,_,C;switch(o){case"email":return(null===(m=e.get(o))||void 0===m?void 0:m.errors)&&(null===(p=e.get(o))||void 0===p?void 0:p.errors.email);case"identification":return(null===(_=e.get(o))||void 0===_?void 0:_.errors)&&(null===(C=e.get(o))||void 0===C?void 0:C.errors.minlength);case"birthdate":return e.get(o).errors&&e.get(o).errors.pattern}}l.d(O,{G:()=>b,N:()=>t})}}]);