"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[342],{7595:(k,P,p)=>{p.d(P,{h:()=>M});var d=p(467),h=p(4262),N=p(4438),A=p(5312),U=p(7927),e=p(3423),g=p(5889);let M=(()=>{var C;class b{constructor(){this.firestore=(0,N.WQX)(h._7),this.userService=(0,N.WQX)(U.D),this.toastService=(0,N.WQX)(g.f),this.NAME_COLLECTION=A.c.colletionName.appointments}getAppointments(){var i=this;return(0,d.A)(function*(){const a=yield(0,h.GG)((0,h.rJ)(i.firestore,i.NAME_COLLECTION));return a.empty?{success:!0,data:[],message:"No appointments found"}:{success:!0,data:a.docs.map(m=>m.data()),message:"Success"}})()}getAppointmentById(i){var a=this;return(0,d.A)(function*(){const l=yield(0,h.x7)((0,h.H9)(a.firestore,a.NAME_COLLECTION,i));return l.exists()?{success:!0,data:l.data(),message:"Success"}:{success:!0,data:null,message:"Appointment not found"}})()}getAppointmentsByDoctor(i){var a=this;return(0,d.A)(function*(){try{const l=yield(0,h.GG)((0,h.rJ)(a.firestore,a.NAME_COLLECTION));if(l.empty)return{success:!0,data:[],message:"No appointments found"};const m=l.docs.filter(f=>f.data().professional.uid===i);return 0===m.length?{success:!0,data:[],message:"No appointments found"}:{success:!0,data:m.map(f=>f.data()),message:"Success"}}catch(l){return{success:!0,data:l,message:"error"}}})()}getAppointmentsByPatient(i){var a=this;return(0,d.A)(function*(){const l=yield(0,h.GG)((0,h.rJ)(a.firestore,a.NAME_COLLECTION));if(l.empty)return{success:!0,data:[],message:"No appointments found"};const m=l.docs.filter(f=>f.data().patient.uid===i);return 0===m.length?{success:!0,data:[],message:"No appointments found"}:{success:!0,data:m.map(f=>f.data()),message:"Success"}})()}createAppointment(i){var a=this;return(0,d.A)(function*(){const l=(0,e.I)();return yield(0,h.BN)((0,h.H9)(a.firestore,a.NAME_COLLECTION,l),{...i,uid:l}).then((0,d.A)(function*(){return yield a.userService.updateUserAppointments({...i,uid:l},i.patient.uid),yield a.userService.updateUserAppointments({...i,uid:l},i.professional.uid),yield a.userService.linkUser(i.professional.uid,i.patient.uid),yield a.userService.linkUser(i.patient.uid,i.professional.uid),{success:!0,data:{...i,uid:l},message:"Success"}})).catch(m=>({success:!1,data:m.code,message:m.message}))})()}updateAppointment(i,a){var l=this;return(0,d.A)(function*(){return yield(0,h.mZ)((0,h.H9)(l.firestore,l.NAME_COLLECTION,i),a).then(()=>({success:!0,data:a,message:"Success"})).catch(m=>({success:!1,data:m.code,message:m.message}))})()}deleteAppointment(i){var a=this;return(0,d.A)(function*(){return yield(0,h.kd)((0,h.H9)(a.firestore,a.NAME_COLLECTION,i)).then(()=>({success:!0,data:i,message:"Success"})).catch(l=>({success:!1,data:l.code,message:l.message}))})()}deleteAppointmentEv(i){var a=this;return(0,d.A)(function*(){const l=yield a.deleteAppointment(i.uid);if(l.success){const m=yield a.userService.getUserById(i.patient.uid),y=yield a.userService.getUserById(i.professional.uid);if(!y||!m)return;yield a.removeAppointmentFromUser(m.data,i.uid),yield a.removeAppointmentFromUser(y.data,i.uid)}return l})()}removeAppointmentFromUser(i,a){var l=this;return(0,d.A)(function*(){if(!i)return;let m=i;const y=m.appointments.findIndex(E=>E.uid===a);return-1!==y&&m.appointments.splice(y,1),yield l.userService.updateUserDB(m,i.uid)})()}searchAppointments(i){var a=this;return(0,d.A)(function*(){try{const l=yield(0,h.GG)((0,h.rJ)(a.firestore,a.NAME_COLLECTION));console.log(l.docs.length);const m=l.docs.filter(f=>{const E=f.data();console.log("appointmentData: ",E);for(const S in E)if(E[S]&&E[S].toString().toLowerCase().includes(i.toLowerCase()))return!0;return!1});return console.log(m.length),0===m.length?{success:!0,data:[],message:"No appointments found"}:{success:!0,data:m.map(f=>f.data()),message:"Success"}}catch(l){return{success:!1,data:l.code?l.code:l,message:"Error"}}})()}}return(C=b).\u0275fac=function(i){return new(i||C)},C.\u0275prov=N.jDH({token:C,factory:C.\u0275fac,providedIn:"root"}),b})()},1342:(k,P,p)=>{p.r(P),p.d(P,{UserComponent:()=>Q});var d=p(467),h=p(6938),N=p(519),A=p(177),U=p(9417),e=p(4438),g=p(4262),M=p(3423),C=p(7927);let b=(()=>{var s;class u{constructor(){this.firestore=(0,e.WQX)(g._7),this.userService=(0,e.WQX)(C.D),this.NAME_COLLECTION="notes"}createNote(t,n){var r=this;return(0,d.A)(function*(){const c=(0,M.I)();return yield(0,g.BN)((0,g.H9)(r.firestore,r.NAME_COLLECTION,c),{...t,id:c}).then((0,d.A)(function*(){return yield r.asignNoteToUser(c,n),console.log("Note created: ",t),{success:!0,data:{...t,id:c},message:"Success"}})).catch(v=>({success:!1,data:v,message:"Error"}))})()}getNotesByUser(t){var n=this;return(0,d.A)(function*(){const r=yield n.userService.getUserById(t);if(!r.success)return{success:!1,data:null,message:"Error"};const c=r.data.notes;return 0===c.length?{success:!0,data:c,message:"No notes found"}:{success:!0,data:(yield Promise.all(c.map(function(){var O=(0,d.A)(function*(_){const F=yield n.getNotesById(_.uid);return F.success?F.data:null});return function(_){return O.apply(this,arguments)}}()))).filter(O=>null!==O),message:"Success"}})()}getNotesById(t){var n=this;return(0,d.A)(function*(){return yield(0,g.x7)((0,g.H9)(n.firestore,n.NAME_COLLECTION,t)).then(r=>({success:!0,data:r.data(),message:"Success"})).catch(r=>({success:!1,data:r,message:"Error"}))})()}asignNoteToUser(t,n){var r=this;return(0,d.A)(function*(){const c=yield r.userService.getUserById(n);return c.success?(c.data.notes.push({uid:t}),yield r.userService.updateUserDB({...c.data,userId:n})):{success:!1,data:null,message:"Error"}})()}unasignNoteToUser(t,n){var r=this;return(0,d.A)(function*(){const c=yield r.userService.getUserById(n);return c.success?(c.data.notes=c.data.notes.filter(v=>v.uid!==t),yield r.userService.updateUserDB({...c.data,userId:n})):{success:!1,data:null,message:"Error"}})()}deleteNoteById(t,n){var r=this;return(0,d.A)(function*(){return yield(0,g.kd)((0,g.H9)(r.firestore,r.NAME_COLLECTION,t)).then(()=>(r.unasignNoteToUser(t,n),{success:!0,data:null,message:"Success"})).catch(c=>({success:!1,data:c,message:"Error"}))})()}updateNoteById(t,n){var r=this;return(0,d.A)(function*(){return yield(0,g.BN)((0,g.H9)(r.firestore,r.NAME_COLLECTION,t),n).then(()=>({success:!0,data:n,message:"Success"})).catch(c=>({success:!1,data:c,message:"Error"}))})()}}return(s=u).\u0275fac=function(t){return new(t||s)},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),u})();var x=p(5889);function i(s,u){if(1&s){const o=e.RV6();e.j41(0,"div",12)(1,"label",13),e.EFF(2),e.nI1(3,"date"),e.nI1(4,"titlecase"),e.k0s(),e.j41(5,"span"),e.EFF(6),e.k0s(),e.j41(7,"div",14)(8,"button",15),e.bIt("click",function(){const n=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.startNoteUpdate(n))}),e.EFF(9,"Editar"),e.k0s(),e.j41(10,"button",16),e.bIt("click",function(){const n=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.deleteNote(n.id))}),e.EFF(11,"Borrar"),e.k0s()()()}if(2&s){const o=u.$implicit;e.R7$(2),e.JRh(e.bMT(4,5,e.i5U(3,2,o.createdAt,"longDate"))),e.R7$(4),e.JRh(o.description)}}function a(s,u){if(1&s&&e.Z7z(0,i,12,7,"div",12,e.Vm6),2&s){const o=e.XpG();e.Dyx(o.notes)}}function l(s,u){1&s&&(e.j41(0,"div",12)(1,"label",17),e.EFF(2,"* No hay notas registradas en este usuario"),e.k0s()())}let m=(()=>{var s;class u{constructor(t,n){this.noteService=t,this.toastService=n,this.userId="",this.notes=[],this.noteToEdit={},this.noteValue=""}ngOnInit(){var t=this;return(0,d.A)(function*(){t.userId||console.log("No user id provided");const{data:n}=yield t.noteService.getNotesByUser(t.userId);n&&(t.notes=n)})()}createNote(){var t=this;return(0,d.A)(function*(){if(console.log("createNote "),console.log("Note to edit: ",t.noteToEdit),void 0!==t.noteToEdit.id)return void t.updateNote();const n={description:t.noteValue,createdAt:(new Date).toLocaleString("en-US",{timeZone:"America/Costa_Rica"}),updatedAt:(new Date).toLocaleString("en-US",{timeZone:"America/Costa_Rica"})},r=yield t.noteService.createNote(n,t.userId);r.success?(console.log("response: ",r.data),t.toastService.showSuccess("Su nota ha sido creada."),t.notes.push(r.data),t.noteValue=""):t.toastService.showError("Ha ocurrido un error al crear la nota.")})()}startNoteUpdate(t){var n=this;return(0,d.A)(function*(){n.noteToEdit=t,n.noteValue=t.description,console.log("Note to edit: ",n.noteToEdit)})()}updateNote(){var t=this;return(0,d.A)(function*(){const n={...t.noteToEdit,description:t.noteValue,updatedAt:(new Date).toLocaleString("en-US",{timeZone:"America/Costa_Rica"})};(yield t.noteService.updateNoteById(n.id,n)).success?(t.toastService.showSuccess("Su nota ha sido actualizada."),t.notes=t.notes.map(c=>c.id===n.id?n:c),t.noteValue="",t.noteToEdit={}):t.toastService.showError("Ha ocurrido un error al actualizar la nota.")})()}deleteNote(t){var n=this;return(0,d.A)(function*(){(yield n.noteService.deleteNoteById(t,n.userId)).success?(n.toastService.showSuccess("Su nota ha sido eliminada."),console.log("Note deleted: ",t),n.notes=n.notes.filter(c=>c.id!==t)):n.toastService.showError("Ha ocurrido un error al eliminar la nota.")})()}}return(s=u).\u0275fac=function(t){return new(t||s)(e.rXU(b),e.rXU(x.f))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-notes"]],inputs:{userId:"userId"},standalone:!0,features:[e.aNF],decls:15,vars:2,consts:[[1,"notes-container","mt-8"],[1,"notes-title"],[1,"notes"],[1,"left-section"],[1,"input-container"],[1,"search_input"],["type","text","placeholder","A\xf1adir nota al usuario...",3,"ngModelChange","keyup.enter","ngModel"],[1,"search-button",3,"click"],["src","/assets/icon/btn_send.svg","alt","plusIcon",1,"send-icon"],[1,"send-btn"],[1,"notes_list","mt-8","mb-20"],[1,"right-section"],[1,"note"],["for","note"],[1,"actions"],[1,"btn_edit",3,"click"],[1,"btn_delete",3,"click"],["for","no-results"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2,"Notas sobre el paciente"),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"input",6),e.mxI("ngModelChange",function(c){return e.DH7(n.noteValue,c)||(n.noteValue=c),c}),e.bIt("keyup.enter",function(){return n.createNote()}),e.k0s(),e.j41(8,"button",7),e.bIt("click",function(){return n.createNote()}),e.nrm(9,"img",8),e.k0s()(),e.nrm(10,"button",9),e.k0s(),e.j41(11,"div",10),e.DNE(12,a,2,0)(13,l,3,0),e.k0s()(),e.nrm(14,"div",11),e.k0s()()),2&t&&(e.R7$(7),e.R50("ngModel",n.noteValue),e.R7$(5),e.vxM(12,n.notes&&n.notes.length>0?12:13))},dependencies:[U.YN,U.me,U.BC,U.vS,A.MD,A.PV,A.vh],styles:['.notes-container[_ngcontent-%COMP%]{color:var(--dark-gray)}.notes[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:1rem}.left-section[_ngcontent-%COMP%], .right-section[_ngcontent-%COMP%]{flex:1}.notes-title[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1rem}.send-btn[_ngcontent-%COMP%]{width:15px;height:15px}.notes_list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.note[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.note[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}.actions[_ngcontent-%COMP%]   .btn_edit[_ngcontent-%COMP%]{color:var(--dark-blue)}.actions[_ngcontent-%COMP%]   .btn_delete[_ngcontent-%COMP%]{position:relative;color:var(--error-red)}.actions[_ngcontent-%COMP%]   .btn_delete[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-.5rem;top:50%;transform:translateY(-50%);width:1px;height:1.5rem;background-color:#ccc}.search_input[_ngcontent-%COMP%]{position:relative;width:100%}.search_input[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:100%;height:2.25rem;border-radius:1rem;font-size:.87rem;border:1px solid var(--light-gray);padding:0 3rem 0 1rem;box-sizing:border-box}.search_input[_ngcontent-%COMP%] > .search-button[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;transform:translateY(-50%);background:none;border:none;cursor:pointer;padding:0}.search_input[_ngcontent-%COMP%] > .search-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem;height:1.5rem}.note[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.note[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;margin-left:1.5rem}@media screen and (max-width: 1150px){.notes[_ngcontent-%COMP%]{flex-direction:column}.left-section[_ngcontent-%COMP%]{order:2}.right-section[_ngcontent-%COMP%]{order:1}}']}),u})(),y=(()=>{var s;class u{transform(t){const n=new Date,r=function f(s){const[u,o,t]=s.split("/").map(n=>parseInt(n,10));return new Date(t,o-1,u)}(t);if(isNaN(r.getTime()))throw new Error("Invalid date format");const c=n.getTime()-r.getTime();return Math.floor(c/315576e5)}}return(s=u).\u0275fac=function(t){return new(t||s)},s.\u0275pipe=e.EJ8({name:"calculateAge",type:s,pure:!0,standalone:!0}),u})();var E=p(6068),S=p(1517),I=p(2185),T=p(4441),D=p(600),R=p(7595);const j=()=>({width:"25rem",height:"15.625rem"}),w=()=>({"flex-direction":"column"});function L(s,u){1&s&&e.nrm(0,"app-spinner")}function B(s,u){if(1&s&&(e.j41(0,"div",6)(1,"label",18),e.EFF(2,"C\xe9dula:"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&s){const o=e.XpG(2);e.R7$(4),e.JRh(o.user.identification)}}function $(s,u){if(1&s&&(e.j41(0,"div",9)(1,"label",19),e.EFF(2,"Edad:"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"calculateAge"),e.k0s()()),2&s){const o=e.XpG(2);e.R7$(4),e.JRh(e.bMT(5,1,o.user.birthdate))}}function G(s,u){if(1&s){const o=e.RV6();e.j41(0,"div",15)(1,"label",8),e.EFF(2,"Direcci\xf3n:"),e.k0s(),e.j41(3,"div"),e.nrm(4,"p-blockUI",20),e.j41(5,"p-panel",21,0)(7,"div",22),e.nrm(8,"app-map",23),e.k0s()()(),e.j41(9,"button",24),e.bIt("click",function(){e.eBV(o);const n=e.XpG(2);return e.Njj(n.openInGoogleMaps())}),e.j41(10,"span"),e.EFF(11," Obtener ruta "),e.k0s()()()}if(2&s){const o=e.sdS(6);e.R7$(4),e.Y8G("target",o)("blocked",!0),e.R7$(),e.Y8G("showHeader",!1),e.R7$(3),e.Y8G("mapStyles",e.lJ4(5,j))("containerStyle",e.lJ4(6,w))}}function X(s,u){if(1&s&&(e.j41(0,"div",30)(1,"label",31),e.EFF(2,"Especialidad:"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&s){const o=e.XpG(4);e.R7$(4),e.JRh(o.previousAppointment.specialties[0])}}function V(s,u){if(1&s&&(e.j41(0,"div",26)(1,"label",27),e.EFF(2,"D\xeda:"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"date"),e.nI1(6,"titlecase"),e.k0s()(),e.j41(7,"div",28)(8,"label",29),e.EFF(9,"Hora:"),e.k0s(),e.j41(10,"span"),e.EFF(11),e.nI1(12,"date"),e.k0s()(),e.DNE(13,X,5,1,"div",30)),2&s){const o=e.XpG(3);e.R7$(4),e.JRh(e.bMT(6,6,e.i5U(5,3,o.previousAppointment.datetime,"EEEE, MMMM d, y"))),e.R7$(7),e.JRh(e.brH(12,8,o.previousAppointment.datetime,"h:mm a","UTC+0")),e.R7$(2),e.vxM(13,(null==o.previousAppointment.specialties?null:o.previousAppointment.specialties.length)>0?13:-1)}}function H(s,u){1&s&&(e.j41(0,"span"),e.EFF(1,"No hay citas previas"),e.k0s())}function J(s,u){if(1&s&&(e.j41(0,"div",30)(1,"label",31),e.EFF(2,"Especialidad:"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&s){const o=e.XpG(4);e.R7$(4),e.JRh(o.nextAppointment.specialties[0])}}function W(s,u){if(1&s&&(e.j41(0,"div",26)(1,"label",27),e.EFF(2,"D\xeda:"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"date"),e.nI1(6,"titlecase"),e.k0s()(),e.j41(7,"div",28)(8,"label",29),e.EFF(9,"Hora:"),e.k0s(),e.j41(10,"span"),e.EFF(11),e.nI1(12,"date"),e.k0s()(),e.DNE(13,J,5,1,"div",30)),2&s){const o=e.XpG(3);e.R7$(4),e.JRh(e.bMT(6,6,e.i5U(5,3,o.nextAppointment.datetime,"EEEE, MMMM d, y"))),e.R7$(7),e.JRh(e.brH(12,8,o.nextAppointment.datetime,"h:mm a","UTC+0")),e.R7$(2),e.vxM(13,(null==o.nextAppointment.specialties?null:o.nextAppointment.specialties.length)>0?13:-1)}}function K(s,u){1&s&&(e.j41(0,"span"),e.EFF(1,"No hay citas pr\xf3ximas"),e.k0s())}function Y(s,u){if(1&s&&(e.j41(0,"div",16)(1,"div",25)(2,"h3"),e.EFF(3,"Ultima Cita"),e.k0s(),e.DNE(4,V,14,12)(5,H,2,0),e.k0s(),e.nrm(6,"hr"),e.j41(7,"div",25)(8,"h3"),e.EFF(9,"Pr\xf3xima Cita"),e.k0s(),e.DNE(10,W,14,12)(11,K,2,0),e.k0s()()),2&s){const o=e.XpG(2);e.R7$(4),e.vxM(4,o.previousAppointment?4:5),e.R7$(6),e.vxM(10,o.nextAppointment?10:11)}}function z(s,u){if(1&s&&e.nrm(0,"app-notes",17),2&s){const o=e.XpG(2);e.Y8G("userId",o.id)}}function Z(s,u){if(1&s&&(e.j41(0,"h2",3),e.EFF(1," Informaci\xf3n del paciente"),e.k0s(),e.j41(2,"div",4)(3,"div",5),e.DNE(4,B,5,1,"div",6),e.j41(5,"div",7)(6,"label",8),e.EFF(7,"Nombre:"),e.k0s(),e.j41(8,"span"),e.EFF(9),e.k0s()(),e.DNE(10,$,6,3,"div",9),e.j41(11,"div",10)(12,"label",11),e.EFF(13,"Correo:"),e.k0s(),e.j41(14,"a",12)(15,"span"),e.EFF(16),e.k0s()()(),e.j41(17,"div",13)(18,"label",14),e.EFF(19,"Tel\xe9fono:"),e.k0s(),e.j41(20,"a",12)(21,"span"),e.EFF(22),e.k0s()()(),e.DNE(23,G,12,7,"div",15),e.k0s(),e.DNE(24,Y,12,2,"div",16),e.k0s(),e.DNE(25,z,1,1,"app-notes",17)),2&s){const o=e.XpG();e.R7$(4),e.vxM(4,o.currentUser&&"admin"===o.currentUser.role?4:-1),e.R7$(5),e.Lme("",o.user.name," ",o.user.lastname,""),e.R7$(),e.vxM(10,o.currentUser&&"admin"===o.currentUser.role?10:-1),e.R7$(4),e.FS9("href","mailto:"+o.user.email,e.B4B),e.R7$(2),e.JRh(o.user.email),e.R7$(4),e.FS9("href","tel:"+o.user.phoneNumber,e.B4B),e.R7$(2),e.JRh(o.user.phoneNumber),e.R7$(),e.vxM(23,o.currentUser&&"admin"===o.currentUser.role?23:-1),e.R7$(),e.vxM(24,o.currentUser&&"admin"===o.currentUser.role?24:-1),e.R7$(),e.vxM(25,o.currentUser&&"admin"===o.currentUser.role?25:-1)}}let Q=(()=>{var s;class u{constructor(t,n,r,c,v){this.route=t,this.userService=n,this.authService=r,this.platform=c,this.appointmentService=v,this.id="",this.isLoading=!1,this.user={},this.currentUser={},this.previousAppointment={},this.nextAppointment={},this.id=this.route.snapshot.params.id}ngOnInit(){this.getUser(this.id).then(t=>{this.user=t}),this.getCurrentUser().then(()=>{this.getAppointments()})}ngOnDestroy(){this.isLoading=!1,this.user={},this.currentUser={},this.id=""}getUser(t=""){var n=this;return(0,d.A)(function*(){n.isLoading=!0;const r=yield n.userService.getUserById(t);if(r.success)return n.isLoading=!1,r.data;n.isLoading=!1})()}getCurrentUser(){var t=this;return(0,d.A)(function*(){yield t.authService.getCurrentUser().then(n=>{t.currentUser=n})})()}getAppointments(){var t=this;return(0,d.A)(function*(){const n=(yield t.appointmentService.getAppointmentsByPatient(t.id)).data.filter(_=>_.professional.uid===t.currentUser.uid),r=new Date,c=new Date(r.getTime()-60*r.getTimezoneOffset()*1e3).toISOString(),v=n.filter(_=>new Date(_.datetime).toISOString()<c),O=n.filter(_=>new Date(_.datetime).toISOString()>c);v.sort((_,F)=>new Date(F.datetime).getTime()-new Date(_.datetime).getTime()),O.sort((_,F)=>new Date(_.datetime).getTime()-new Date(F.datetime).getTime()),t.previousAppointment=v.length>0?v[0]:null,t.nextAppointment=O.length>0?O[0]:null})()}onLocationChange(t){this.user.lat=null==t?void 0:t.lat,this.user.lng=null==t?void 0:t.lng}openInGoogleMaps(){var t,n,r,c;const v=null!==(t=null===(n=this.user)||void 0===n?void 0:n.lat)&&void 0!==t?t:0,O=null!==(r=null===(c=this.user)||void 0===c?void 0:c.lng)&&void 0!==r?r:0;let _="";_=this.platform.is("android")?`geo:0,0?q=${v},${O}`:`https://www.google.com/maps/search/?api=1&query=${v},${O}`,window.open(_,"_system")}}return(s=u).\u0275fac=function(t){return new(t||s)(e.rXU(I.nX),e.rXU(C.D),e.rXU(T.u),e.rXU(D.OD),e.rXU(R.h))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-user"]],standalone:!0,features:[e.aNF],decls:4,vars:1,consts:[["pnl",""],[1,"full-screen-container"],[1,"user-details-container"],[1,"details-title"],[1,"user-details"],[1,"details"],[1,"id"],[1,"name"],["for","name"],[1,"age"],[1,"email"],["for","email"],[3,"href"],[1,"phone"],["for","phone"],[1,"directions"],[1,"appointments"],[3,"userId"],["for","id"],["for","age"],["styleClass","panel-overlay",3,"target","blocked"],["styleClass","map-panel",3,"showHeader"],[1,"map"],[3,"mapStyles","containerStyle"],[1,"direction-btn",3,"click"],[1,"appointment"],[1,"day"],["for","day"],[1,"hour"],["for","hour"],[1,"specialty"],["for","specialty"]],template:function(t,n){1&t&&(e.j41(0,"div",1)(1,"div",2),e.DNE(2,L,1,0,"app-spinner")(3,Z,26,11),e.k0s()()),2&t&&(e.R7$(2),e.vxM(2,n.isLoading?2:3))},dependencies:[m,y,E.i,h.S,h.K,N.b,N.Z,S.t,A.MD,A.PV,A.vh],styles:['@charset "UTF-8";.full-screen-container[_ngcontent-%COMP%]{position:fixed;top:4rem;left:0;width:100%;height:100%;overflow-y:auto;animation:fadeInBackground .2s ease-in-out forwards}.user-details-container[_ngcontent-%COMP%]{display:block;margin:2rem auto;padding:1rem;width:70%;color:var(--dark-gray);height:80vh}.details-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;margin-bottom:3rem}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;padding:2rem;margin:auto;width:100%;font-size:1.25rem;box-shadow:0 0 10px #0000001a;border-radius:1rem}.details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.details[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--dark-blue);text-decoration:underline}.details[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.details[_ngcontent-%COMP%]   .directions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start!important;gap:1rem}.details[_ngcontent-%COMP%]   .directions[_ngcontent-%COMP%]   .direction-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:.5rem .75rem;border-radius:2rem;background-color:var(--dark-blue);color:var(--white);cursor:pointer;font-weight:500}.details[_ngcontent-%COMP%]   .directions[_ngcontent-%COMP%]   .map-marker-icon[_ngcontent-%COMP%]{width:1.75rem;height:1.75rem}[_nghost-%COMP%]     .map-panel.p-panel .p-panel-content{padding:0}[_nghost-%COMP%]     .panel-overlay.p-blockui{height:15.625rem;width:25rem!important;border-radius:1rem}.appointments[_ngcontent-%COMP%], .appointment[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.appointment[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.user-details[_ngcontent-%COMP%] > .directions[_ngcontent-%COMP%]{display:none}.full-screen-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:.25px}.full-screen-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:1px}.full-screen-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--dark-blue);border-radius:1px}.full-screen-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--darker-blue)}.input-container[_ngcontent-%COMP%]{position:relative;width:100%}.map[_ngcontent-%COMP%]{width:100%;height:100%}.send-btn[_ngcontent-%COMP%]{position:absolute;top:50%;right:.5rem;transform:translateY(-50%);border:none;background:none;cursor:pointer}.send-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}@media screen and (max-width: 1150px){.full-screen-container[_ngcontent-%COMP%]{height:calc(100vh - 8rem)}.user-details-container[_ngcontent-%COMP%]{width:90%}.user-details[_ngcontent-%COMP%]{flex-direction:column;padding:0;margin:0;box-shadow:none}.details[_ngcontent-%COMP%]{gap:1rem}.user-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]:after{content:"";display:block;width:100%;border-top:1px solid var(--light-gray);margin-top:1rem;margin-bottom:1rem}}']}),u})()},3423:(k,P,p)=>{p.d(P,{I:()=>e});let U=(g=21)=>{let M="",C=crypto.getRandomValues(new Uint8Array(g));for(;g--;)M+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&C[g]];return M};function e(){return U(26)}}}]);